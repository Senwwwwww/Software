@startuml

' 活动图
|用户|
start
:查看医院信息;
if (是否已注册?) then (是)
  :使用手机号/验证码登录;
else (否)
  :使用身份证注册;
  |系统管理员|
  :审核用户注册;
  if (审核通过?) then (是)
    |用户|
    :使用手机号/验证码登录;
  else (否)
    stop
  endif
endif

:选择医院、科室、日期 (上午/下午);
:查看可用医生;
if (有医生可预约?) then (是)
  :选择医生;
  :预约挂号;
  if (预约成功?) then (是)
    :打印预约单;
    :接收通知;
    if (是否选择立即支付?) then (是)
      |第三方支付系统|
      :处理支付;
      |用户|
      if (年龄 > 60岁?) then (是)
        :免除费用;
      else (否)
        :在线支付费用;
      endif
      :打印挂号单;
      :接收通知;
    else (否)
      :在医院挂号处支付;
    endif
  else (否)
    stop
  endif
else (否)
  stop
endif

:就诊当天;
|医院挂号处工作人员|
:核查预约单;
if (已支付费用?) then (是)
  :打印挂号单;
  :盖章确认挂号;
  |用户|
  :就诊;
else (否)
  |用户|
  :在医院挂号处支付;
  |医院挂号处工作人员|
  :核查支付;
  :打印挂号单;
  :盖章确认挂号;
  |用户|
  :就诊;
endif

stop

@enduml
